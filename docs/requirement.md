# 🎄 4주차 미션 - 크리스마스 프로모션

> 크리스마스 디데이 할인 이벤트 내용에 따른 이벤트 플래너를 고객에게 보여주기

<br/>

## 🥇 4주차 미션 목표

1. 클래스의 역할과 책임을 생각하여 분리할 수 있다.
2. 클래스 작성 시 도메인 로직에 집중하는 방향으로 구현한다.
3. 도메인 로직에 대한 단위 테스트를 작성할 수 있다.

<br/>

## 👣 지난 3주차보다 신경썼던 점

1. 예외 상황을 빈틈없이 처리하고자 했다.
2. 각 객체의 역할을 명확히 하여 분리하고자 했다.
3. 도메인 로직과 관련된 모든 메서드는 단위 테스트를 작성하고자 했다.
4. 요구 사항에 있는 내용을 놓치지 않고 반영하고자 했다.

<br/>

## 📝 구현할 기능

1. 이벤트 플래너가 시작하는 기능
2. 고객으로부터 식당 예상 방문 날짜를 입력받는 기능
3. 고객이 입력한 예상 방문 날짜가 유효한 값인지 검사하는 기능
4. 고객으로부터 메뉴와 각 메뉴당 개수를 입력받는 기능
5. 고객이 입력한 메뉴와 각 메뉴당 개수가 유효한 값인지 검사하는 기능
6. 고객이 주문한 메뉴와 개수를 출력하는 기능
7. 할인 전 총 주문 금액을 계산해 출력하는 기능
8. 날짜마다 할인 금액이 증가하도록 계산하는 기능
9. 요일에 따라 메뉴당 할인 가격을 계산하는 기능
10. 이벤트 달력에 따라 총주문 금액 할인 가격을 계산하는 기능
11. 총 주문 금액에 따라 증정 이벤트를 하는 기능
12. 이벤트 기간에 따라 다른 프로모션을 적용하는 기능
13. 혜택 내역을 출력하는 기능
14. 총혜택 금액을 계산해 출력하는 기능
15. 할인 후 예상 결제 금액을 계산해 출력하는 기능
16. 총혜택 금액에 따라 다른 이벤트 배지를 부여하는 기능
17. 형식에 맞추어 이벤트 혜택 미리보기를 출력하는 기능
18. 예외 발생 시, 메시지 출력과 함께 해당 부분부터 다시 입력받는 기능

<br/>

## 🛠️ 절차별 명세 (완료율 100%)

### 이벤트 플래너 시작

- [x] `App.js`의 `run()`로 이벤트 플래너가 시작된다.

### 예상 방문 날짜를 입력받는 기능

- [x] 이벤트 플래너 시작과 동시에 식당 예상 방문 날짜 입력을 유도하는 메시지가 출력된다.

### 예상 방문 날짜 유효성 검사 기능

- [x] 방문 날짜는 양의 정수만 입력 가능하다. (음수, 소수, 공백, 특수문자, 문자열, 0으로 시작하는 숫자 불가)
- [x] 방문 날짜는 1 이상 31 이하의 범위로만 입력 가능하다.
- [x] 위의 조건을 하나라도 만족하지 않으면 `[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요.`가 출력되고, 다시 입력받는다.

### 메뉴와 각 메뉴당 개수를 입력받는 기능

- [x] 고객이 방문 날짜를 입력하면 메뉴와 메뉴의 개수를 묻는 메시지가 출력된다.

### 메뉴와 메뉴당 개수 유효성 검사 기능

- [x] 메뉴 이름 뒤에 공백 없이 하이픈과 함께 개수를 입력해야 한다.
- [x] 각 메뉴 간에는 공백 없이 쉼표로만 구분된다.
- [x] 메뉴의 개수는 1 이상의 양의 정수만 입력 가능하다. (음수, 소수, 공백, 특수문자, 문자열, 0으로 시작하는 숫자 불가)
- [x] 메뉴는 중복 없이 입력해야 한다. (메뉴 이름은 같지만 개수가 다른 경우도 포함)
- [x] 메뉴판에 있는 메뉴만 입력해야 한다.
- [x] 메뉴판에 없는 메뉴를 주문하면 메뉴판 안내 메시지가 출력된다.
- [x] 위의 조건을 하나라도 만족하지 않으면 `[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.`가 출력되고, 다시 입력받는다.
- [x] 메뉴 개수가 20개를 초과할 경우 `[ERROR] 메뉴는 한 번에 최대 20개까지만 주문할 수 있습니다. 다시 입력해 주세요.`가 출력되고, 다시 입력받는다.
- [x] 음료만 주문할 경우 `[ERROR] 음료만 주문 시, 주문할 수 없습니다. 다시 입력해 주세요.`가 출력되고, 다시 입력받는다.

### 주문 메뉴를 출력하는 기능

- [x] 각 메뉴와 개수는 `메뉴 N개\n` 형식으로 변환되어 출력된다.

### 할인 전 총 주문 금액을 계산해 출력하는 기능

- [x] 총주문 금액 10,000원 이상부터 모든 이벤트가 적용되도록 한다.
- [x] 총주문 금액 10,000원 미만인 경우 `총주문 금액 10,000원 이상부터 이벤트가 적용됩니다.`가 출력된다.
- [x] 총주문 금액은 `메뉴 개수 * 메뉴당 가격`으로 계산한다.
- [x] 아래와 같이 메뉴당 가격을 반영한다.

```
<애피타이저>
양송이수프(6,000), 타파스(5,500), 시저샐러드(8,000)

<메인>
티본스테이크(55,000), 바비큐립(54,000), 해산물파스타(35,000), 크리스마스파스타(25,000)

<디저트>
초코케이크(15,000), 아이스크림(5,000)

<음료>
제로콜라(3,000), 레드와인(60,000), 샴페인(25,000)
```

### 날짜마다 할인 금액이 증가하는 계산 기능

- [x] `2023.12.1 ~ 2023.12.25`은 크리스마스 디데이 할인을 적용한다.
  - [x] 1,000원으로 시작하여 크리스마스가 다가올수록 날마다 할인 금액이 100원씩 증가하도록 한다.
  - [x] 12월 1일에 1,000원, 2일에 1,100원, ..., 25일엔 3,400원 할인된다.
  - [x] 총 주문 금액에서 해당 금액만큼 할인이 적용되도록 한다.
- [x] 다만, `2023.12.26 ~ 2023.12.31`은 크리스마스 디데이 할인이 적용되지 않는다.

### 요일에 따라 메뉴당 할인 가격 계산 기능

- [x] **평일**은 월요일~금요일이 아닌, **일요일~목요일**로 지정한다.
- [x] 평일에는 디저트 메뉴를 메뉴 1개당 2,023원 할인되도록 한다.
- [x] **주말**은 토요일/일요일이 아닌, **금요일/토요일**로 지정한다.
- [x] 주말에는 메인 메뉴를 메뉴 1개당 2,023원 할인되도록 한다.

### 이벤트 달력에 따른 총주문 금액 특별 할인 가격 계산 기능

- [x] 이벤트 달력에 별이 있는 날에는 총주문 금액에서 1,000원 특별 할인되도록 한다.
- [x] 특별 할인 날짜는 `12/3(일), 12/10(일), 12/17(일), 12/24(일), 12/25(월), 12/31(일)`이다.

### 총 주문 금액에 따른 증정 이벤트 기능

- [x] 할인 전 총주문 금액이 12만 원 이상일 때, 샴페인 1개가 증정되도록 한다.
- [x] 증정 이벤트에 해당하지 않는 경우, 증정 메뉴 `없음`으로 보여 준다.

### 이벤트 기간에 따라 프로모션을 적용하는 기능

- [x] '크리스마스 디데이 할인'을 제외한 다른 이벤트는 2023.12.1 ~ 2023.12.31 동안 적용되도록 한다.

### 혜택 내역을 출력하는 기능

- [x] 해당 고객에게 적용된 이벤트 내역만 보여준다.
- [x] 적용된 이벤트가 하나도 없다면 혜택 내역 `없음`으로 보여 준다.
- [x] 혜택 내역에 여러 개의 이벤트가 적용된 경우는 아래와 같이 출력된다.

```
<혜택 내역>
크리스마스 디데이 할인: -1,200원
평일 할인: -4,046원
특별 할인: -1,000원
증정 이벤트: -25,000원
```

### 총혜택 금액을 계산해 출력하는 기능

- [x] `총혜택 금액 = 할인 금액의 합계 + 증정 메뉴의 가격`으로 계산된다.

### 할인 후 예상 결제 금액을 계산해 출력하는 기능

- [x] `할인 후 예상 결제 금액 = 할인 전 총주문 금액 - 할인 금액`으로 계산된다.
- [x] 이때, 증정 메뉴의 가격은 할인 후 예상 결제 금액에 포함하지 않는다.

### 총혜택 금액에 따라 이벤트 배지를 부여하는 기능

- [x] 총혜택 금액에 따라 다른 이벤트 배지를 부여되도록 한다.
- [x] 부여되는 규칙은 아래와 같이 한다.
  - [x] 5천 원 이상: 별
  - [x] 1만 원 이상: 트리
  - [x] 2만 원 이상: 산타
- [x] 이벤트 배지가 부여되지 않는 경우, `없음`으로 보여 준다.
- [x] 적용된 이벤트가 하나도 없는 경우는 아래 예시와 같이 출력된다.

```
안녕하세요! 우테코 식당 12월 이벤트 플래너입니다.
12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)
26 
주문하실 메뉴를 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,초코케이크-1)
타파스-1,제로콜라-1 
12월 26일에 우테코 식당에서 받을 이벤트 혜택 미리 보기!
 
<주문 메뉴>
타파스 1개
제로콜라 1개

<할인 전 총주문 금액>
8,500원
 
<증정 메뉴>
없음
 
<혜택 내역>
없음
 
<총혜택 금액>
0원
 
<할인 후 예상 결제 금액>
8,500원
 
<12월 이벤트 배지>
없음
```

### 이벤트 플래너 출력 기능

- [x] 고객이 메뉴와 메뉴의 개수를 입력하면 이벤트 플래너가 출력된다.
- [x] 아래와 같은 형식으로 이벤트 플래너가 출력된다.

```
안녕하세요! 우테코 식당 12월 이벤트 플래너입니다.
12월 중 식당 예상 방문 날짜는 언제인가요? (숫자만 입력해 주세요!)
26 
주문하실 메뉴를 메뉴와 개수를 알려 주세요. (e.g. 해산물파스타-2,레드와인-1,초코케이크-1)
타파스-1,제로콜라-1 
12월 26일에 우테코 식당에서 받을 이벤트 혜택 미리 보기!
 
<주문 메뉴>
타파스 1개
제로콜라 1개

<할인 전 총주문 금액>
8,500원
 
<증정 메뉴>
없음
 
<혜택 내역>
없음
 
<총혜택 금액>
0원
 
<할인 후 예상 결제 금액>
8,500원
 
<12월 이벤트 배지>
없음
```

### 예외 및 종료

- [x] 예외 발생 시, `[ERROR]`로 시작하는 에러 메시지를 출력한다.
- [x] 에러 메시지 출력과 함께 해당 부분부터 입력을 다시 받는다.
- [x] 주문이 정상 처리 되면, 이벤트 혜택 내역과 동시에 이벤트 플래너가 종료된다.

<br/>

## 🛠️ 객체별 명세

> MVC 패턴 + Layered Architecture 적용

### [Model]

- 도메인 모델을 구현
- 도메인의 핵심 로직을 구현

### [View]

- 사용자의 입력과 출력을 담당
- 입력 및 출력한 값이 유효한지 검증

### [Controller]

- 입력 및 출력과 같은 사용자 인터페이스 로직을 담당
- 사용자 요청을 응용 영역이 필요로 하는 형식으로 변환해 응용 영역에 전달
- 응용 영역의 응답을 출력 형식에 맞게 변환하여 반환

### [Service]

- 비즈니스 로직을 담당
- 도메인 모델을 이용해 사용자에게 제공할 기능을 구현
- 실제 도메인 로직 구현은 도메인 모델에 위임

### [common]

- `constants` 출력 문자열과 관련 숫자들을 상수화
- `utils` 비즈니스 로직 외의 역할을 담당하는 함수
- `validator` 유효성을 검사하는 메서드

<br/>

## 🗂️ 폴더 구조

```
🎄 javascript-christmas-6-ella-yschoi
📦__tests__
 ┣ 📂unit
 ┃ ┣ 📜BadgeTest.js
 ┃ ┣ 📜DiscountTest.js
 ┃ ┣ 📜EventDateTest.js
 ┃ ┣ 📜EventProcessorTest.js
 ┃ ┣ 📜MenuTest.js
 ┃ ┗ 📜OrderTest.js
 ┗ 📜ApplicationTest.js
📦docs
 ┣ 📜README.md
 ┣ 📜convention.md
 ┗ 📜requirement.md
📦src
 ┣ 📂common
 ┃ ┣ 📜constants.js
 ┃ ┣ 📜utils.js
 ┃ ┗ 📜validator.js
 ┣ 📂controller
 ┃ ┗ 📜EventPlanner.js
 ┣ 📂model
 ┃ ┣ 📜Badge.js
 ┃ ┣ 📜Discount.js
 ┃ ┣ 📜EventDate.js
 ┃ ┣ 📜Menu.js
 ┃ ┗ 📜Order.js
 ┣ 📂service
 ┃ ┗ 📜EventProcessor.js
 ┣ 📂view
 ┃ ┣ 📜InputView.js
 ┃ ┗ 📜OutputView.js
 ┣ 📜App.js
 ┗ 📜index.js
📜.eslintrc.cjs
📜.gitignore
📜.npmrc
📜.prettierrc.js
📜README.md
📜image.png
```

<br/>

## ✅ 프로그래밍 요구 사항

### 실행 환경

- [x] Node.js `18.17.1 버전`에서 실행 가능한가?
- [x] 프로그램 실행의 시작점인 `App.js`의 `run` 메서드로 실행시킬 수 있는가?

### 기능 요구 사항

- [x] `package.json`을 변경 없이 외부 라이브러리(jQuery, Lodash 등)를 사용하지 않고, 순수 Vanilla JS로만 구현했는가?
- [x] [JavaScript 코드 컨벤션](https://github.com/woowacourse/woowacourse-docs/tree/main/styleguide/javascript)을 지키면서 프로그래밍 했는가?
- [x] 프로그램 종료 시 `process.exit()`를 호출하지 않도록 했나?
- [x] 프로그램 구현이 완료되면 `ApplicationTest`의 모든 테스트가 성공하나?
- [x] 프로그래밍 요구 사항에서 달리 명시하지 않는 한 파일, 패키지 이름을 수정하거나 이동하지 않았는가?
- [x] indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 2까지만 허용했는가?
- [x] 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들었는가?
- [x] Jest를 이용하여 정리한 기능 목록이 정상 동작함을 테스트 코드로 확인했는가?
- [x] 함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현했는가?
- [x] else를 최대한 지양하였는가?
- [x] 도메인 로직에 단위 테스트를 구현했는가? (단, UI(Console.readLineAsync, Console.print) 로직에 대한 단위 테스트는 제외)
- [x] 핵심 로직을 구현하는 코드와 UI를 담당하는 로직을 구분했는가?
- [x] 사용자가 잘못된 값을 입력할 경우 `throw`문을 사용해 예외를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력하고 해당 부분부터 입력을 다시 받게 했는가?

### 추가된 요구 사항

- [x] 제공된 `InputView`, `OutputView` 객체를 활용해 구현했는가?

### 라이브러리

- [x] `@woowacourse/mission-utils`의 `Console` API를 사용하여 구현했는가?
- [x] 사용자의 값을 입력 받고 출력하기 위해 `Console.readLineAsync`, `Console.print`를 활용했는가?

<br/>

## 🧹 리팩토링

- [x] 모든 출력 메시지와 값을 상수 처리했는가?
- [x] 에러 메시지를 상황에 따라 내용을 세분화 했는가?
- [x] 함수는 하나의 일만 하도록 여러 메서드로 세분화 했는가?
- [x] 불필요한 주석은 없는가?
- [x] 세미콜론, 괄호 간격, 공백 등 컨벤션이 일관적인가?

<br/>

## 🔄 다른 문서 바로가기

- [🎄 미션 개요](./README.md)
- [📦 컨벤션](./convention.md)
